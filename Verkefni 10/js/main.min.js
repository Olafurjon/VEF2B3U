function logstod(e,o,t,n,a,s){this.name=e,this.company=o,this.bensin=t,this.diesel=n,this.geox=a,this.geoy=s}function initMap(){console.log("mapinit");var e=new google.maps.DirectionsService,o=new google.maps.DirectionsRenderer,t=new google.maps.Map(document.getElementById("map"),{zoom:8}),n=new google.maps.Geocoder;n.geocode({address:"Iceland"},function(e,o){"OK"===o?t.setCenter(e[0].geometry.location):window.alert("Geocode was not successful for the following reason: "+o)});var a=new google.maps.InfoWindow({map:t});navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){var o={lat:e.coords.latitude,lng:e.coords.longitude};new google.maps.Marker({position:o,map:t,title:"Þú!"});a.setPosition(o),a.setContent("Staðsetning fundin"),t.setCenter(o)},function(){handleLocationError(!0,a,t.getCenter())}):handleLocationError(!1,a,t.getCenter());for(var s=0;s<arraystodvar.length;s++){var r=arraystodvar[s].geox,i=arraystodvar[s].geoy,l=arraystodvar[s].name,g="img/fillingstation.png";new google.maps.Marker({position:{lat:r,lng:i},map:t,icon:g,title:l})}o.setMap(t);var d=function(){calculateAndDisplayRoute(e,o)};document.getElementById("start").addEventListener("change",d),document.getElementById("end").addEventListener("change",d)}function calculateAndDisplayRoute(e,o){e.route({origin:document.getElementById("start").value,destination:document.getElementById("end").value,travelMode:"DRIVING"},function(e,t){"OK"===t?o.setDirections(e):window.alert("Directions request failed due to "+t)})}function handleLocationError(e,o,t){o.setPosition(t),o.setContent(e?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.")}var arraystodvar=[],stodvar=[];$.ajax({url:"http://apis.is/petrol",type:"GET",dataType:"json",async:!1,success:function(e){console.log(e);for(var o=0;o<e.results.length-1;o++){t=new logstod(e.results[o].name,e.results[o].company,e.results[o].bensin95,e.results[o].diesel,e.results[o].geo.lat,e.results[o].geo.lon),console.log(e.results[o].company),arraystodvar.push(t);var t={nafn:e.results[o].name,lat:e.results[o].geo.lat,lon:e.results[o].geo.lon};stodvar.push(t)}console.log("ajax")}});var me;